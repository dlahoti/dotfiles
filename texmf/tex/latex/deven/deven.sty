\NeedsTeXFormat{LaTeX2e}[1994/06/01]
\ProvidesPackage{deven}[2017/07/15 Deven custom macros]

\RequirePackage{amssymb,amsmath,amsfonts,amsthm,mathtools,mathrsfs}
\RequirePackage{physics,slashed}
  \let\abs\relax
  \let\norm\relax
  \let\dd\relax
  \let\Tr\relax
  \let\Res\relax
\RequirePackage[american]{babel}
\RequirePackage[no-math]{fontspec}
\RequirePackage[shortlabels]{enumitem}
\RequirePackage{ifthen}
\RequirePackage{xparse}
\RequirePackage{clrscode4e}
  \let\ident\id
    \let\id\relax
  \let\Endblock\End
    \let\End\relax
\RequirePackage{csquotes}
\RequirePackage[usenames,dvipsnames,svgnames,table]{xcolor}
\RequirePackage[protrusion=true]{microtype}
\RequirePackage[type1]{libertine}
\RequirePackage{libertine}
\RequirePackage[supstfm=libertinesups]{superiors}
\RequirePackage[varqu]{inconsolata}
\RequirePackage[libertine,vvarbb]{deven-newtxmath} %smallerops
\RequirePackage[T1,euler-digits,small]{eulervm}
  \let\mathvarbf=\mathbf\relax
  \let\mathbf=\mathbold\relax
  \DeclareMathAlphabet\mathvarcal{OMS}{cmsy}{m}{n}
  \SetMathAlphabet\mathvarcal{bold}{OMS}{cmsy}{b}{n}
  %\DeclareMathAlphabet\mathvarcal{U}{eus}{m}{n}
  %\SetMathAlphabet\mathvarcal{bold}{U}{eus}{b}{n}

\DeclareOption{6046}{%
  \let\reals\relax
  \let\integers\relax
  \let\naturals\relax
  \let\rationals\relax
  \let\complex\relax
  \let\abs\relax
  \let\card\relax
  \let\norm\relax
  \let\floor\relax
  \let\ceil\relax
  \let\sbrace\relax
  \let\cbrace\relax
  \let\paren\relax
  \let\prob\relax
  \let\expect\relax
  \let\expectsq\relax
  \let\variance\relax
  \let\choose\relax
  \let\goesto\relax
  \let\pmod\relax
  \let\matx\relaj
  \let\Adj\relax
  \let\percent\relax
  \let\transpose\relax
  \let\proof\relax
}

\ProcessOptions\relax

% the following taken from the `stix' package
  \DeclareFontEncoding{LS1}{}{}
  \DeclareFontEncoding{LS2}{}{\noaccents@}
  \DeclareFontSubstitution{LS1}{stix}{m}{n}
  \DeclareFontSubstitution{LS2}{stix}{m}{n}
  %\DeclareSymbolFont{stixoperators}{LS1}{stix}{m}{n}
  \DeclareSymbolFont{stixlargesymbols}{LS2}{stixex}{m}{n}
  %\SetSymbolFont{stixoperators}{bold}{LS1}{stix}{b}{n}
  \SetSymbolFont{stixlargesymbols}{bold}{LS2}{stixex}{b}{n}
  \def\stix@undefine#1{%
      \if\relax\noexpand#1\let#1=\@undefined\fi}
  \def\stix@MathDelimiter#1#2#3#4#5#6{%
      \stix@undefine#1%
      \DeclareMathDelimiter{#1}{#2}{#3}{#4}{#5}{#6}}
  %\stix@MathDelimiter{(}          {\mathopen} {stixoperators}   {"2E}{stixlargesymbols}{"00}
  %\stix@MathDelimiter{)}          {\mathclose}{stixoperators}   {"2F}{stixlargesymbols}{"01}
  %\stix@MathDelimiter{[}          {\mathopen} {stixoperators}   {"5B}{stixlargesymbols}{"04}
  %\stix@MathDelimiter{]}          {\mathclose}{stixoperators}   {"5D}{stixlargesymbols}{"05}
  %\stix@MathDelimiter{\lfloor}    {\mathopen} {stixlargesymbols}{"E2}{stixlargesymbols}{"08}
  %\stix@MathDelimiter{\rfloor}    {\mathclose}{stixlargesymbols}{"E3}{stixlargesymbols}{"09}
  %\stix@MathDelimiter{\lceil}     {\mathopen} {stixlargesymbols}{"E4}{stixlargesymbols}{"0A}
  %\stix@MathDelimiter{\rceil}     {\mathclose}{stixlargesymbols}{"E5}{stixlargesymbols}{"0B}
  %\stix@MathDelimiter{\lbrace}    {\mathopen} {stixoperators}   {"5E}{stixlargesymbols}{"0C}
  %\stix@MathDelimiter{\rbrace}    {\mathclose}{stixoperators}   {"60}{stixlargesymbols}{"0D}
  %\stix@MathDelimiter{\langle}    {\mathopen} {stixlargesymbols}{"EA}{stixlargesymbols}{"10}
  %\stix@MathDelimiter{\rangle}    {\mathclose}{stixlargesymbols}{"EB}{stixlargesymbols}{"11}
  %\stix@MathDelimiter{\lmoustache}{\mathopen} {stixlargesymbols}{"E6}{stixlargesymbols}{"EC}
  %\stix@MathDelimiter{\rmoustache}{\mathclose}{stixlargesymbols}{"E7}{stixlargesymbols}{"ED}
  %\stix@MathDelimiter{/}          {\mathord}  {stixoperators}   {"5F}{stixlargesymbols}{"16}
  %\stix@MathDelimiter{\backslash} {\mathord}  {stixoperators}   {"5C}{stixlargesymbols}{"17}
  %\expandafter\DeclareMathDelimiter\@backslashchar{\mathord}{stixoperators}{"5C}{stixlargesymbols}{"17}
  %\stix@MathDelimiter{|}          {\mathord}  {stixlargesymbols}{"F0}{stixlargesymbols}{"F3}
  %\stix@MathDelimiter{\vert}      {\mathord}  {stixlargesymbols}{"F0}{stixlargesymbols}{"F3}
  %\stix@MathDelimiter{\Vert}      {\mathord}  {stixlargesymbols}{"F1}{stixlargesymbols}{"F4}
  %        \let\|=\Vert
  %\stix@MathDelimiter{\lvert}     {\mathopen} {stixlargesymbols}{"F0}{stixlargesymbols}{"F3}
  %\stix@MathDelimiter{\rvert}     {\mathclose}{stixlargesymbols}{"F0}{stixlargesymbols}{"F3}
  %\stix@MathDelimiter{\lVert}     {\mathopen} {stixlargesymbols}{"F1}{stixlargesymbols}{"F4}
  %\stix@MathDelimiter{\rVert}     {\mathclose}{stixlargesymbols}{"F1}{stixlargesymbols}{"F4}
  \stix@MathDelimiter{\lParen}    {\mathopen} {stixlargesymbols}{"DE}{stixlargesymbols}{"02}
  \stix@MathDelimiter{\rParen}    {\mathclose}{stixlargesymbols}{"DF}{stixlargesymbols}{"03}
  \stix@MathDelimiter{\lBrack}    {\mathopen} {stixlargesymbols}{"E0}{stixlargesymbols}{"06}
  \stix@MathDelimiter{\rBrack}    {\mathclose}{stixlargesymbols}{"E1}{stixlargesymbols}{"07}
  \stix@MathDelimiter{\lBrace}    {\mathopen} {stixlargesymbols}{"E8}{stixlargesymbols}{"0E}
  \stix@MathDelimiter{\rBrace}    {\mathclose}{stixlargesymbols}{"E9}{stixlargesymbols}{"0F}
  \stix@MathDelimiter{\lAngle}    {\mathopen} {stixlargesymbols}{"EC}{stixlargesymbols}{"12}
  \stix@MathDelimiter{\rAngle}    {\mathclose}{stixlargesymbols}{"ED}{stixlargesymbols}{"13}
  \stix@MathDelimiter{\lbrbrak}   {\mathopen} {stixlargesymbols}{"EE}{stixlargesymbols}{"14}
  \stix@MathDelimiter{\rbrbrak}   {\mathclose}{stixlargesymbols}{"EF}{stixlargesymbols}{"15}
  \stix@MathDelimiter{\lgroup}    {\mathopen} {stixlargesymbols}{"DC}{stixlargesymbols}{"6A}
  \stix@MathDelimiter{\rgroup}    {\mathclose}{stixlargesymbols}{"DD}{stixlargesymbols}{"6B}
  \stix@MathDelimiter{\bracevert} {\mathord}  {stixlargesymbols}{"6E}{stixlargesymbols}{"6E}
  \stix@MathDelimiter{\Vvert}     {\mathord}  {stixlargesymbols}{"F2}{stixlargesymbols}{"F5}

% the following taken from the `fdsymbol' package
  \DeclareFontFamily{U}{FdSymbolF}{}
  \DeclareFontShape{U}{FdSymbolF}{m}{n}{
      <-7.1> s * [1.0] FdSymbolF-Book
      <7.1-> s * [1.0] FdSymbolF-Book
  }{}
  \DeclareFontShape{U}{FdSymbolF}{b}{n}{
      <-7.1> s * [1.0] FdSymbolF-Medium
      <7.1-> s * [1.0] FdSymbolF-Medium
  }{}
  \DeclareSymbolFont{fddelimiters}{U}{FdSymbolF}{m}{n}
  \SetSymbolFont{fddelimiters}{bold}{U}{FdSymbolF}{b}{n}
  \newcommand\fdsy@DeclareDelimiter[4]{%
    \if\relax\noexpand#1\let#1\undefined\fi
    \DeclareMathDelimiter{#1}{#2}{#3}{#4}{#3}{#4}
  }
  \fdsy@DeclareDelimiter{\ulcorner} {\mathopen} {fddelimiters}{"37}
  \fdsy@DeclareDelimiter{\urcorner} {\mathclose}{fddelimiters}{"3D}
  \fdsy@DeclareDelimiter{\llcorner} {\mathopen} {fddelimiters}{"43}
  \fdsy@DeclareDelimiter{\lrcorner} {\mathclose}{fddelimiters}{"49}
  \fdsy@DeclareDelimiter{\ullcorner}{\mathopen} {fddelimiters}{"4F}
  \fdsy@DeclareDelimiter{\ulrcorner}{\mathclose}{fddelimiters}{"55}

\mathchardef\mathhyphen="2D
% use sans-serif math operator font
  \AtBeginDocument{\sbox0{$\mathsf{\xdef\mathsfgroup{\the\mathgroup}}$}}
  \def\operator@font{\mathgroup\mathsfgroup}
% use \varphi instead of \phi by default
  \let\temp\phi
  \let\phi\varphi
  \let\varphi\temp
% same for \varnothing and \emptyset
  \let\temp\emptyset
  \let\emptyset\varnothing
  \let\varnothing\temp
  \let\temp\relax
% use variant limits
  \let\@projlim\varprojlim
  \let\@injlim\varinjlim
  \let\varprojlim\projlim
  \let\varinjlim\injlim
  \renewcommand{\projlim}{\@projlim\limits}
  \renewcommand{\injlim}{\@injlim\limits}

\renewcommand{\rmdefault}{minlibertine}
\setmainfont[Ligatures={Required, TeX, Common}, Numbers={Proportional, OldStyle}]{Linux Libertine O}
\setsansfont[Ligatures={Required, TeX, Common}, Numbers={Proportional, OldStyle}]{Linux Biolinum O}
\newfontfamily{\bfseries}{LinLibertine_RB.otf}
\newfontfamily{\lmsffamily}[Scale=0.92]{Latin Modern Sans}
\newfontfamily{\ligatured}[Ligatures={Required, TeX, Common, Contextual, Rare, Historic}, Numbers={Proportional, OldStyle}]{Linux Libertine O}
\setmonofont[StylisticSet={1,3}]{Inconsolatazi4}

\MakeAutoQuote{<}{>}

\linespread{1.25}

\newcommand{\TODO}[1][TODO]{{\color{red}\ttfamily{#1}}}

% paired delimiters
  \DeclarePairedDelimiter{\prn}{(}{)}
  \DeclarePairedDelimiter{\Prn}{\lParen}{\rParen}
  \DeclarePairedDelimiter{\brk}{[}{]}
  \DeclarePairedDelimiter{\Brk}{\lBrack}{\rBrack}
  \DeclarePairedDelimiter{\brc}{\lbrace}{\rbrace}
  \DeclarePairedDelimiter{\Brc}{\lBrace}{\rBrace}
  \DeclarePairedDelimiter{\ang}{\langle}{\rangle}
  \DeclarePairedDelimiter{\Ang}{\lAngle}{\rAngle}
  \DeclarePairedDelimiter{\abs}{\lvert}{\rvert}
  \DeclarePairedDelimiter{\norm}{\lVert}{\rVert}
  \DeclarePairedDelimiter{\floor}{\lfloor}{\rfloor}
  \let\ceil\relax
    \DeclarePairedDelimiter{\ceil}{\lceil}{\rceil}
  \DeclarePairedDelimiter{\ucorners}{\ulcorner}{\urcorner}
  \DeclarePairedDelimiter{\lcorners}{\llcorner}{\lrcorner}
  \DeclarePairedDelimiter{\ulcorners}{\ullcorner}{\ulrcorner}

% theorem environments
  %\newtheoremstyle{proof}{0pt}{\topsep}{}{}{\slshape}{.}{5pt plus 1pt minus 1pt}{}
  %\theoremstyle{proof}
  %%\let\proof\relax
  %%\let\c@proof\relax
  %\newtheorem*{bareproof}{Proof}
  %\renewenvironment{proof}[1][]{\begin{bareproof}\pushQED{\qed}#1\popQED\end{bareproof}}
  \newtheoremstyle{plain}{\topsep}{\topsep}{\slshape}{}{\bfseries}{.}{5pt plus 1pt minus 1pt}{}
  \theoremstyle{plain}
  \newcounter{thm}
  \newtheorem{theorem}[thm]{Theorem}
  \newtheorem{lemma}[thm]{Lemma}
  \newtheorem{proposition}[thm]{Proposition}
  \newtheorem{corollary}[thm]{Corollary}
  \newtheorem{definition}{Definition}
  \newtheorem{hypothesis}{Hypothesis}
  \newtheorem{exercise}{Exercise}
  \newtheorem{fact}{Fact}
  \newtheorem{example}{Example}
  \newtheorem*{theorem*}{Theorem}
  \newtheorem*{lemma*}{Lemma}
  \newtheorem*{proposition*}{Proposition}
  \newtheorem*{corollary*}{Corollary}
  \newtheorem*{definition*}{Definition}
  \newtheorem*{hypothesis*}{Hypothesis}
  \newtheorem*{exercise*}{Exercise}
  \newtheorem*{fact*}{Fact}
  \newtheorem*{example*}{Example}
  \renewenvironment{proof}[1][\proofname]{\vspace{-2.25em}\par
    \pushQED{\qed}%
    \normalfont \topsep6\p@\@plus6\p@\relax%
    \trivlist%
    \item[\hskip\labelsep\itshape#1\@addpunct{.}]\ignorespaces%
  }{%
    \popQED\endtrivlist\@endpefalse%
  }

% general
  \let\varvec\vec\relax
  \renewcommand*{\vec}[1]{\mathbf{#1}}
  \newcommand*{\conj}[1]{\overline{#1}}
  \let\mod\relax
    \DeclareMathOperator{\mod}{mod}
  \newcommand*{\closure}[1]{\overline{#1}}
  \DeclareMathOperator{\dom}{dom}
  \DeclareMathOperator{\im}{im}
  \DeclareMathOperator{\sgn}{sgn}
  \DeclareMathOperator{\lc}{lc}
  \newcommand{\id}{\operator@font{id}}
  \newcommand{\isom}{\cong}
  \newcommand{\from}{\leftarrow}
  \newcommand{\bij}{\xrightarrow{\sim}}
  \newcommand{\inj}{\hookrightarrow}
  \newcommand{\surj}{\twoheadrightarrow}
  \newcommand{\tensor}{\otimes}
  \DeclareMathOperator{\res}{res}
  \DeclareMathOperator{\Hom}{Hom}
  \newcommand{\defeq}{\coloneqq}
  \newcommand*{\setbuild}[2]{\brc*{#1 : #2}}
  \newcommand*{\setdesc}[1]{\brc*{\textup{#1}}}
  % add \prod* as product with prime symbol
    \let\@prod\prod
    \newcommand{\@@prod}{\sideset{}{'}\@prod}
    \def\prod{\@ifstar\@@prod\@prod}
  \newcommand{\compose}{\circ}

% computer science
  \DeclareMathOperator{\polylog}{polylog}
  \newcommand{\True}{\textbf{true}}
  \newcommand{\False}{\textbf{false}}

% number theory
  \newcommand{\divides}{\mid}
  \newcommand{\ndivides}{\nmid}
  \DeclareMathOperator{\Cl}{Cl}
  \DeclareMathOperator{\cl}{cl}
  \DeclareMathOperator{\Spl}{Spl}
  \DeclareMathOperator{\disc}{disc}
  \newcommand{\legendre}[2]{\genfrac{(}{)}{}{}{#1}{#2}}
  \DeclareMathOperator{\val}{val}
  \newcommand{\Frob}{\operator@font{Frob}}

% analysis
  \newcommand{\dd}{\mathop{}\!\operator@font{d}}
  \newcommand*{\der}[3][1]{\ifthenelse{\equal{#1}{1}}{\frac{\dd #2}{\dd #3}}{\frac{\dd^#1 #2}{{\dd #3}^#1}}}
  \newcommand*{\pd}[3][1]{\ifthenelse{\equal{#1}{1}}{\frac{\partial #2}{\partial #3}}{\frac{\partial^#1 #2}{{\partial #3}^#1}}}
  \DeclareMathOperator{\bdry}{bdry}
  \DeclareMathOperator{\interior}{int}
  \DeclareMathOperator{\covol}{covol}

% probability
  \DeclareMathOperator{\Expect}{E}
  \DeclareMathOperator{\Var}{Var}

% algebra
  \newcommand{\GL}{\operator@font{GL}}
  \newcommand{\SL}{\operator@font{SL}}
  \DeclareMathOperator{\Tr}{Tr}
  \newcommand{\N}{\operator@font{N}}
  \newcommand{\transpose}{\textsc{T}}
  \newcommand{\herm}{\dagger}
  \DeclareMathOperator{\Ind}{Ind}
  \DeclareMathOperator{\Res}{Res}
  \newcommand{\dominatedby}{\triangleleft}
  \newcommand{\dominatedbyeq}{\trianglelefteq}
  \newcommand{\dominates}{\triangleright}
  \newcommand{\dominateseq}{\trianglerighteq}
  \def\residue{\@ifstar\overline\bar}
  \DeclareMathOperator{\Gal}{Gal}
  \DeclareMathOperator{\Aut}{Aut}
  \DeclareMathOperator{\Frac}{Frac}
  \DeclareMathOperator{\Spec}{Spec}
  \newcommand*{\completion}[1]{\widehat{#1}}
  \def\dual{\@ifstar\widehat\hat}
  \DeclareMathOperator{\khar}{char}
  \newcommand{\nsubgrp}{\triangleleft}
  \newcommand{\nsupgrp}{\triangleright}
  \newcommand{\nsubgrpeq}{\trianglelefteq}
  \newcommand{\nsupgrpeq}{\trianglerighteq}
  \newcommand{\semitimes}{\rtimes}
  \DeclareMathOperator{\Stab}{Stab}
  \DeclareMathOperator{\Sym}{Sym}
  \DeclareMathOperator{\End}{End}

% Lie theory
  \newcommand{\Gl}{\mathfrak{gl}}
  \newcommand{\Sl}{\mathfrak{sl}}

% algebraic geometry
  \DeclareMathOperator{\Div}{Div}
  \let\div\relax
  \DeclareMathOperator{\div}{div}
  \DeclareMathOperator{\Pic}{Pic}
  \DeclareMathOperator{\Supp}{Supp}
  \newcommand{\sh}{\operator@font{sh}}

% logic and set theory
  \newcommand{\union}{\cup}
  \newcommand{\intersect}{\cap}
  \newcommand{\powset}{\mathvarcal{P}}
  \DeclareMathOperator{\Succ}{S}
  \DeclareMathOperator{\fst}{fst}
  \DeclareMathOperator{\snd}{snd}
  \def\card{\@ifstar\@@card\@card}
    \newcommand*{\@card}[1]{\mathop{}\!\textup{\#}#1}
    \newcommand*{\@@card}[1]{\mathop{}\!\textup{\#}\,\prn*{#1}}
  \newcommand{\proves}{\vdash}
  \renewcommand{\models}{\vDash}
  \newcommand{\lconj}{\wedge}
  \newcommand{\lmeet}{\wedge}
  \newcommand{\ldisj}{\vee}
  \newcommand{\ljoin}{\vee}
  \newcommand{\liff}{\leftrightarrow}
  \newcommand{\limpl}{\to}
  \newcommand{\lImpl}{\Rightarrow}
  \newcommand{\lexp}{\Rightarrow}
  \newcommand*{\axiom}[1]{\textsc{\lowercase{#1}}}
  \let\lquot\ucorners\relax
  \newcommand*{\bq}[1]{\brk*{\lquot{#1}}}
  \DeclareMathOperator{\Bew}{Bew}
  \DeclareMathOperator{\isproof}{B}
  \DeclareMathOperator{\Con}{Con}
  \newcommand{\PA}{\operator@font{PA}}
  \newcommand{\QE}{\operator@font{Q_E}}
  \newcommand{\lbox}{\Box}
  \newcommand{\ldiam}{\Diamond}
  \newcommand{\power}{\mathscr{P}}
  \DeclareMathOperator{\cf}{cf}

% physics
  \newcommand{\outarrow}{\odot}
  \newcommand{\inarrow}{\otimes}

% category theory
  \newcommand{\Mor}{\operator@font{Mor}}
  \newcommand{\Nat}{\operator@font{Nat}}
  \DeclareMathOperator{\Sh}{Sh}
  \newcommand{\adjoins}{\dashv}
  \newcommand{\opp}{{\operator@font{op}}}
  \newcommand{\@addhyphen}[1]{\def\ProcessedArgument{#1\mathhyphen}}
  \NewDocumentCommand{\cat}{ s m >{\@addhyphen} o }{\IfNoValueF{#3}{#3}\IfBooleanTF{#1}{\mathcal{#2}}{\textup{\lmsffamily{#2}}}}
  \NewDocumentCommand{\DeclareCategory}{ m o }{\@xp\def\csname cat#1\endcsname{\cat{\IfValueTF{#2}{#2}{#1}}}}
  \DeclareCategory{Set}
  \DeclareCategory{Top}
  \DeclareCategory{Grp}
  \DeclareCategory{Rep}
  \DeclareCategory{Ab}
  \DeclareCategory{CRing}
  \DeclareCategory{Ring}
  \DeclareCategory{RingNU}[Ring\ensuremath{^{\slashed{1}}}]
  \DeclareCategory{Mod}
  \DeclareCategory{LMod}
  \DeclareCategory{RMod}
  \DeclareCategory{CAlg}
  \DeclareCategory{Alg}
  \DeclareCategory{CAlgNU}[CAlg\ensuremath{^{\slashed{1}}}]
  \DeclareCategory{Coalg}
  \DeclareCategory{Aff}
  \DeclareCategory{Sch}
  \DeclareCategory{PSh}
  \DeclareCategory{Sh}
  \DeclareCategory{QCoh}
  \DeclareCategory{Cat}
  \DeclareCategory{Fun}

\endinput
